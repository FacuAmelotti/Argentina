<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Temario - Historia Argentina ðŸ‡¦ðŸ‡·</title>
  <link rel="icon" type="image/png" href="../src/img/logo.png">
  <link rel="stylesheet" href="./css/base.css">
  <!-- Estilos patriÃ³ticos cargados aparte -->
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600&family=Rubik:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
/* === CONTENEDOR GENERAL === */
.temario-container {
  min-height: 100vh;
  padding: 180px 40px 80px;
  max-width: 1300px;
  margin: 0 auto;
}

.temario-header {
  text-align: center;
  margin-bottom: 100px;
}

.temario-title {
  font-size: clamp(3rem, 6vw, 5rem);
  font-weight: 300;
  margin-bottom: 20px;
  background: linear-gradient(135deg, #ffffff, #a8b5ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 25px rgba(170, 180, 255, 0.3);
}

.temario-subtitle {
  font-size: 1.2rem;
  color: rgba(255, 255, 255, 0.65);
  font-weight: 300;
  letter-spacing: 0.5px;
}

/* === GRID DE UNIDADES === */
.chapters-grid {
  display: flex;
  flex-direction: column;
  gap: 40px;
  position: relative;
}

/* LÃ­nea vertical decorativa (timeline) */
.chapters-grid::before {
  content: "";
  position: absolute;
  top: 0;
  left: 40px;
  width: 2px;
  height: 100%;
  background: linear-gradient(to bottom, rgba(255,255,255,0.1), rgba(255,255,255,0));
}

@media (max-width: 900px) {
  .chapters-grid::before {
    display: none;
  }
}

/* === TARJETAS === */
.chapter-card {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 40px 50px;
  border-radius: 26px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(12px);
  transition: all 0.4s ease;
  box-shadow: 0 8px 25px rgba(0,0,0,0.25);
  animation: fadeInUp 0.8s ease forwards;
  opacity: 0;
}

.chapter-card:nth-child(1) { animation-delay: 0.1s; }
.chapter-card:nth-child(2) { animation-delay: 0.2s; }
.chapter-card:nth-child(3) { animation-delay: 0.3s; }
.chapter-card:nth-child(4) { animation-delay: 0.4s; }
.chapter-card:nth-child(5) { animation-delay: 0.5s; }
.chapter-card:nth-child(6) { animation-delay: 0.6s; }
.chapter-card:nth-child(7) { animation-delay: 0.7s; }
.chapter-card:nth-child(8) { animation-delay: 0.8s; }
.chapter-card:nth-child(9) { animation-delay: 0.9s; }

.chapter-card.active:hover {
  transform: translateX(10px);
  border-color: rgba(255,255,255,0.25);
  box-shadow: 0 15px 45px rgba(160,170,255,0.25);
}

.chapter-card.disabled {
  opacity: 0.4;
  border-style: dashed;
  cursor: not-allowed;
  box-shadow: none;
}

/* === NÃšMERO DE UNIDAD === */
.chapter-number {
  position: absolute;
  left: 0;
  top: 40px;
  transform: translateX(-90%);
  font-size: 2.2rem;
  font-weight: 600;
  background: linear-gradient(135deg, #ffffff, #a8b5ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  opacity: 0.8;
}

@media (max-width: 900px) {
  .chapter-number { display: none; }
}

/* === CONTENIDO DE UNIDAD === */
.chapter-title {
  font-size: 1.8rem;
  color: #ffffff;
  font-weight: 400;
  margin-bottom: 8px;
}

.chapter-description {
  font-size: 1rem;
  color: rgba(255,255,255,0.75);
  line-height: 1.7;
  max-width: 900px;
}

/* === TAGS DE TEMAS === */
.chapter-topics {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 15px;
}

.topic-tag {
  font-size: 0.85rem;
  padding: 7px 16px;
  background: rgba(255,255,255,0.08);
  border-radius: 20px;
  color: rgba(255,255,255,0.85);
  border: 1px solid rgba(255,255,255,0.12);
  transition: background 0.3s ease;
}

.topic-tag:hover {
  background: rgba(255,255,255,0.2);
}

/* === ACCIONES (BOTONES / ESTADO) === */
.chapter-action {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 15px;
}

.chapter-btn {
  padding: 12px 36px;
  border-radius: 50px;
  font-size: 0.95rem;
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  border: none;
  background: linear-gradient(135deg, #ffffff, #bfc3ff);
  color: #000;
  box-shadow: 0 6px 20px rgba(180,180,255,0.25);
  transition: all 0.3s ease;
}

.chapter-btn:hover {
  transform: translateY(-3px);
  background: linear-gradient(135deg, #ffffff, #9ea8ff);
  box-shadow: 0 12px 35px rgba(150,160,255,0.35);
}

.chapter-card.disabled .chapter-btn {
  pointer-events: none;
  background: transparent;
  border: 2px solid rgba(255,255,255,0.15);
  color: rgba(255,255,255,0.4);
}

/* === ESTADO / BADGES === */
.status-badge {
  font-size: 0.8rem;
  padding: 6px 14px;
  border-radius: 20px;
  font-weight: 500;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.status-badge.available {
  background: rgba(120,255,120,0.15);
  color: rgb(120,255,120);
  border: 1px solid rgba(120,255,120,0.3);
}

.status-badge.coming-soon {
  background: rgba(255,255,255,0.05);
  color: rgba(255,255,255,0.45);
  border: 1px solid rgba(255,255,255,0.1);
}

/* === RELACIONADOS === */
.related-section {
  margin-top: 25px;
  padding-top: 15px;
  border-top: 1px solid rgba(255,255,255,0.08);
}

.related-title {
  font-size: 0.9rem;
  color: rgba(255,255,255,0.7);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

.related-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.related-item, .tool-item {
  background: rgba(80,100,255,0.15);
  border: 1px solid rgba(120,119,198,0.3);
  color: rgba(255,255,255,0.9);
  font-size: 0.85rem;
  padding: 8px 16px;
  border-radius: 20px;
  text-decoration: none;
  transition: all 0.3s ease;
}

.related-item:hover, .tool-item:hover {
  background: rgba(100,110,255,0.3);
  border-color: rgba(120,119,198,0.6);
  color: #ffffff;
  transform: translateY(-2px);
}

/* === ANIMACIÃ“N ENTRADA === */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(25px); }
  to { opacity: 1; transform: translateY(0); }
}

/* === RESPONSIVE === */
@media (max-width: 768px) {
  .temario-container { padding: 100px 20px 60px; }
  .chapter-card { padding: 30px 25px; }
  .chapter-title { font-size: 1.5rem; }
  .chapter-btn { width: 100%; text-align: center; }
}
</style>
<style>
  .nav-menu {
  display: flex;
  list-style: none;
  gap: 22px;
}


.nav-link {
  color: rgba(255, 255, 255, 0.8);
  text-decoration: none;
  font-weight: 400;
  transition: color 0.3s ease;
  bottom: 8px;
}

.nav-link:hover {
  color: #fff;
}

.logo {
    margin-bottom: 8px;
}

.nav-subbar {
  display: flex;
  justify-content: center;             /* todo centrado */
  align-items: center;
  background: transparent !important;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding: 8px 2px;
}

.sub-links {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
}

.sub-links a {
  font-size: 0.58rem;
  padding: 2px 2px;
  
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.7);
  letter-spacing: 0.2px;
  text-decoration: none;
  transition: all 0.25s ease;
}

.sub-links a:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.25);
  color: #fff;
  text-shadow: 0 0 3px rgba(180, 190, 255, 0.5);
  transform: translateY(-1px);
}
/* === BOTÃ“N DE ESTUDIADO (tipo toggle) === */
.mark-studied-btn {
  position: relative;
  padding: 10px 36px 10px 48px;
  border-radius: 50px;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  border: 1px solid rgba(255,255,255,0.15);
  color: rgba(255,255,255,0.75);
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

/* icono tipo check */
.mark-studied-btn::before {
  content: "âœ“";
  position: absolute;
  left: 18px;
  font-size: 1.1rem;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.3s ease;
}

/* hover gris */
.mark-studied-btn:hover {
  background: rgba(255,255,255,0.1);
  border-color: rgba(255,255,255,0.25);
  color: #fff;
}

/* estado activado (estudiado) */
.mark-studied-btn.active {
  background: rgba(120,255,150,0.15);
  border-color: rgba(120,255,150,0.35);
  color: rgb(120,255,150);
  text-shadow: 0 0 4px rgba(120,255,150,0.4);
}

.mark-studied-btn.active::before {
  opacity: 1;
  transform: scale(1);
}

/* efecto de transiciÃ³n suave */
.mark-studied-btn.active:hover {
  background: rgba(120,255,150,0.25);
  box-shadow: 0 0 15px rgba(120,255,150,0.25);
}

/* === TARJETA VERDE CUANDO ESTUDIADA === */
.chapter-card.studied {
  border-color: rgba(120,255,150,0.35);
  box-shadow: 0 10px 40px rgba(120,255,150,0.15);
  background: rgba(120,255,150,0.05);
  transition: all 0.5s ease;
}

.chapter-card.studied .chapter-title {
  color: rgb(120,255,150);
  text-shadow: 0 0 6px rgba(120,255,150,0.4);
}

/* === LINK EN NAV VERDE === */
.nav-subbar a.studied {
  background: rgba(120,255,150,0.1);
  border-color: rgba(120,255,150,0.35);
  color: rgb(120,255,150);
  font-weight: 500;
  box-shadow: 0 0 8px rgba(120,255,150,0.2);
}
.nav-subbar a.studied:hover {
  background: rgba(120,255,150,0.2);
  border-color: rgba(120,255,150,0.5);
  color: #fff;
}


</style>
<style>
  /* =========================================================
   ðŸŽµ Panel de MÃºsica - Argentina
   ========================================================= */
.music-panel {
  position: fixed;
  top: 138px;
  right: 50px;
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  padding: 8px 14px;
  border-radius: 40px;
  backdrop-filter: blur(10px);
  box-shadow: 0 0 15px rgba(255,255,255,0.05);
  z-index: 999;
  transition: background 0.3s ease, transform 0.3s ease;
}

.music-panel:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
}

.music-icon {
  width: 28px;
  height: 28px;
  cursor: pointer;
  filter: drop-shadow(0 0 4px rgba(255,255,255,0.2));
  transition: transform 0.3s ease, filter 0.3s ease;
}

.music-icon:hover {
  transform: scale(1.1);
  filter: drop-shadow(0 0 8px rgba(255,255,255,0.4));
}

.music-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 46px;
  height: 5px;
  border-radius: 5px;
  background: linear-gradient(90deg, #6ec9ff, #ffffff);
  cursor: pointer;
  outline: none;
  transition: all 0.3s ease;
  margin-left: 2px;
}

.music-slider:hover {
  box-shadow: 0 0 8px rgba(110, 201, 255, 0.5);
}

/* Handle del slider */
.music-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #ffffff;
  border: 2px solid #6ec9ff;
  cursor: pointer;
  transition: background 0.3s ease;
}

.music-slider::-webkit-slider-thumb:hover {
  background: #6ec9ff;
}

#music-light {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%) scale(1);
  width: 500px;
  height: 500px;
  background: radial-gradient(circle, rgba(117,170,219,0.5) 0%, rgba(249,215,28,0.25) 40%, transparent 80%);
  border-radius: 50%;
  filter: blur(120px);
  opacity: 0.3;
  pointer-events: none;
  z-index: 1; /* debajo del nav, pero visible */
  mix-blend-mode: screen;
  transition: opacity 0.2s ease, transform 0.2s ease;
}


</style>
    
</head>
<body>

  <!-- Fondo animado -->
  <div class="animated-bg"></div>
  <div class="floating-elements">
    <div class="floating-dot"></div>
    <div class="floating-dot"></div>
    <div class="floating-dot"></div>
    <div class="floating-dot"></div>
    <div class="floating-dot"></div>
  </div>

  <!-- NavegaciÃ³n -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="../../index.html" class="logo">
        <img src="../src/img/arg.png" alt="Historia Argentina">Historia
      </a>
      <ul class="nav-menu">
        <li><a href="./../pages/personajes.html" class="nav-link">Personajes</a></li>
        <li><a href="./../pages/mapas.html" class="nav-link">Mapas histÃ³ricos</a></li>
        <li><a href="./../pages/RevolucionNacional.html" class="nav-link">Mini Juego</a></li>
      </ul>
    </div>

    <div class="nav-subbar">
      <div class="sub-links">
        <a href="#unidad1">1) Ã‰poca Colonial</a>
        <a href="#unidad2">2) RevoluciÃ³n de Mayo</a>
        <a href="#unidad3">3) Independencia y Guerras</a>
        <a href="#unidad4">4) OrganizaciÃ³n Nacional</a>
        <a href="#unidad5">5) Siglo XX y Transformaciones</a>
        <a href="#unidad6">6) Dictaduras y Democracia</a>
        <a href="#unidad7">7) Argentina ContemporÃ¡nea</a>
      </div>
    </div>

        <div class="music-panel">
  <img id="music-toggle" src="../src/img/sound_on.png" alt="Music Control" class="music-icon">
  <input type="range" id="music-volume" min="0" max="1" step="0.01" value="0.4" class="music-slider">
  <audio id="bg-music" loop autoplay>
    <source src="../src/audio/main.mp3" type="audio/mpeg">
  </audio>
        </div>
        

  </nav>

  <!-- Contenido principal -->
  <div class="temario-container">
    <div class="temario-header">
      <h1 class="temario-title">Temario de Historia Argentina</h1>
      <p class="temario-subtitle">RecorrÃ© los grandes momentos que forjaron nuestra NaciÃ³n</p>
    </div>

    <div class="chapters-grid">

      <!-- Unidad 1 -->
      <div class="chapter-card active">
        <div id="unidad1" class="chapter-info">
          <h2 class="chapter-title">1) Ã‰poca Colonial (Siglos XVIâ€“XVIII)</h2>
          <p class="chapter-description">
            Desde la llegada de los conquistadores europeos al territorio del RÃ­o de la Plata hasta los albores del siglo XIX. Estructura colonial, sociedad, economÃ­a y cultura en el Virreinato.
          </p>
          <div class="chapter-topics">
            <span class="topic-tag">Virreinato del RÃ­o de la Plata</span>
            <span class="topic-tag">EconomÃ­a colonial</span>
            <span class="topic-tag">Sociedad y esclavitud</span>
            <span class="topic-tag">Jesuitas y educaciÃ³n</span>
            <span class="topic-tag">Relaciones con EspaÃ±a</span>
          </div>
        </div>
        <div class="chapter-action">
          <span class="status-badge available">Disponible</span>
          <a href="./capitulos/capitulo_1.html" class="chapter-btn">Estudiar</a>
          <button class="chapter-btn mark-studied-btn" data-id="unidad1">Marcar como estudiado</button>
        </div>
      </div>

      <!-- Unidad 2 -->
      <div class="chapter-card active">
        <div id="unidad2" class="chapter-info">
          <h2 class="chapter-title">2) RevoluciÃ³n de Mayo (1810)</h2>
          <p class="chapter-description">
            Proceso polÃ­tico y social que dio origen a la independencia. La caÃ­da del poder virreinal, las ideas ilustradas y los protagonistas del Cabildo Abierto.
          </p>
          <div class="chapter-topics">
            <span class="topic-tag">Contexto internacional</span>
            <span class="topic-tag">Cabildo Abierto</span>
            <span class="topic-tag">Primera Junta</span>
            <span class="topic-tag">Saavedra y Moreno</span>
            <span class="topic-tag">Consecuencias</span>
          </div>
        </div>
        <div class="chapter-action">
          <span class="status-badge available">Disponible</span>
          <a href="./capitulos/capitulo_2.html" class="chapter-btn">Estudiar</a>
          <button class="chapter-btn mark-studied-btn" data-id="unidad2">Marcar como estudiado</button>
        </div>
      </div>

      <!-- Unidad 3 -->
      <div class="chapter-card active">
        <div id="unidad3" class="chapter-info">
          <h2 class="chapter-title">3) Independencia y Guerras (1810â€“1824)</h2>
          <p class="chapter-description">
            La lucha por la independencia y los desafÃ­os polÃ­ticos del nuevo Estado. San MartÃ­n, Belgrano y GÃ¼emes: hÃ©roes de la libertad.
          </p>
          <div class="chapter-topics">
            <span class="topic-tag">Congreso de TucumÃ¡n (1816)</span>
            <span class="topic-tag">EjÃ©rcito de los Andes</span>
            <span class="topic-tag">Batalla de TucumÃ¡n</span>
            <span class="topic-tag">San MartÃ­n y el cruce de los Andes</span>
            <span class="topic-tag">Guerra de la Independencia</span>
          </div>
        </div>
        <div class="chapter-action">
          <span class="status-badge available">Disponible</span>
          <a href="./capitulos/independencia.html" class="chapter-btn">Estudiar</a>
          <button class="chapter-btn mark-studied-btn" data-id="unidad3">Marcar como estudiado</button>
        </div>
      </div>

      <!-- Unidad 4 -->
      <div id="unidad4" class="chapter-card active">
        <div class="chapter-info">
          <h2 class="chapter-title">4) OrganizaciÃ³n Nacional (1824â€“1880)</h2>
          <p class="chapter-description">
            El proceso de construcciÃ³n del Estado argentino: guerras civiles, caudillos y la consolidaciÃ³n de la ConstituciÃ³n Nacional de 1853.
          </p>
          <div class="chapter-topics">
            <span class="topic-tag">Rosas y el federalismo</span>
            <span class="topic-tag">Urquiza y Caseros</span>
            <span class="topic-tag">ConstituciÃ³n de 1853</span>
            <span class="topic-tag">BartolomÃ© Mitre</span>
            <span class="topic-tag">UnificaciÃ³n nacional</span>
          </div>
        </div>
        <div class="chapter-action">
          <span class="status-badge available">Disponible</span>
          <a href="./capitulos/organizacion.html" class="chapter-btn">Estudiar</a>
          <button class="chapter-btn mark-studied-btn" data-id="unidad4">Marcar como estudiado</button>
        </div>
      </div>

      <!-- Unidad 5 -->
      <div id="unidad5" class="chapter-card active">
        <div class="chapter-info">
          <h2 class="chapter-title">5) Siglo XX y Transformaciones Sociales</h2>
          <p class="chapter-description">
            El surgimiento del movimiento obrero, la Reforma Universitaria, el peronismo y los cambios culturales del siglo XX.
          </p>
          <div class="chapter-topics">
            <span class="topic-tag">HipÃ³lito Yrigoyen</span>
            <span class="topic-tag">DÃ©cada Infame</span>
            <span class="topic-tag">Peronismo</span>
            <span class="topic-tag">Reforma Universitaria (1918)</span>
            <span class="topic-tag">Cambios sociales</span>
          </div>
        </div>
        <div class="chapter-action">
          <span class="status-badge available">Disponible</span>
          <a href="./capitulos/sigloXX.html" class="chapter-btn">Estudiar</a>
          <button class="chapter-btn mark-studied-btn" data-id="unidad5">Marcar como estudiado</button>
        </div>
      </div>

      <!-- Unidad 6 -->
      <div id="unidad6" class="chapter-card active">
        <div class="chapter-info">
          <h2 class="chapter-title">6) Dictaduras y Retorno de la Democracia</h2>
          <p class="chapter-description">
            Los golpes de Estado, la Ãºltima dictadura militar (1976â€“1983), la recuperaciÃ³n democrÃ¡tica y el liderazgo de AlfonsÃ­n.
          </p>
          <div class="chapter-topics">
            <span class="topic-tag">Proceso de ReorganizaciÃ³n Nacional</span>
            <span class="topic-tag">Guerra de Malvinas</span>
            <span class="topic-tag">Retorno democrÃ¡tico</span>
            <span class="topic-tag">Juicio a las Juntas</span>
          </div>
        </div>
        <div class="chapter-action">
          <span class="status-badge available">Disponible</span>
          <a href="./capitulos/dictadura.html" class="chapter-btn">Estudiar</a>
          <button class="chapter-btn mark-studied-btn" data-id="unidad6">Marcar como estudiado</button>
        </div>
      </div>

      <!-- Unidad 7 -->
      <div id="unidad7" class="chapter-card active">
        <div class="chapter-info">
          <h2 class="chapter-title">7) Argentina ContemporÃ¡nea (1983â€“Actualidad)</h2>
          <p class="chapter-description">
            De la reconstrucciÃ³n democrÃ¡tica a los desafÃ­os del siglo XXI: economÃ­a, sociedad y polÃ­tica en la Argentina reciente.
          </p>
          <div class="chapter-topics">
            <span class="topic-tag">Democracia y consolidaciÃ³n</span>
            <span class="topic-tag">Crisis del 2001</span>
            <span class="topic-tag">Kirchnerismo</span>
            <span class="topic-tag">Derechos humanos</span>
            <span class="topic-tag">DesafÃ­os actuales</span>
          </div>
        </div>
        <div class="chapter-action">
          <span class="status-badge available">Disponible</span>
          <a href="./capitulos/contemporanea.html" class="chapter-btn">Estudiar</a>
          <button class="chapter-btn mark-studied-btn" data-id="unidad7">Marcar como estudiado</button>
        </div>
      </div>

    </div>
  </div>

  <!-- Scripts -->
  <script>
  document.querySelectorAll('.nav-subbar a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const headerOffset = 100;
        const extraOffset = -150;
        const elementPosition = target.getBoundingClientRect().top + window.scrollY;
        const offsetPosition = elementPosition - headerOffset + extraOffset;
        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
      }
    });
  });

  window.addEventListener("scroll", () => {
    const nav = document.querySelector(".navbar");
    if (window.scrollY > 20) nav.classList.add("scrolled");
    else nav.classList.remove("scrolled");
  });
  </script>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const studiedUnits = JSON.parse(localStorage.getItem("studiedUnits") || "[]");
    studiedUnits.forEach(id => {
      const card = document.querySelector(`#${id}`).closest(".chapter-card");
      const navLink = document.querySelector(`.nav-subbar a[href="#${id}"]`);
      const btn = document.querySelector(`.mark-studied-btn[data-id="${id}"]`);
      if (card) card.classList.add("studied");
      if (navLink) navLink.classList.add("studied");
      if (btn) {
        btn.classList.add("active");
        btn.textContent = "Estudiado";
      }
    });

    document.querySelectorAll(".mark-studied-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const id = btn.dataset.id;
        const card = document.querySelector(`#${id}`).closest(".chapter-card");
        const navLink = document.querySelector(`.nav-subbar a[href="#${id}"]`);
        let studiedUnits = JSON.parse(localStorage.getItem("studiedUnits") || "[]");

        if (studiedUnits.includes(id)) {
          studiedUnits = studiedUnits.filter(u => u !== id);
          localStorage.setItem("studiedUnits", JSON.stringify(studiedUnits));
          card.classList.remove("studied");
          navLink.classList.remove("studied");
          btn.classList.remove("active");
          btn.textContent = "Marcar como estudiado";
        } else {
          studiedUnits.push(id);
          localStorage.setItem("studiedUnits", JSON.stringify(studiedUnits));
          card.classList.add("studied");
          navLink.classList.add("studied");
          btn.classList.add("active");
          btn.textContent = "Estudiado";
        }
      });
    });
  });
  </script>

  <!-- musica -->
<script>
  const music = document.getElementById('bg-music');
const toggle = document.getElementById('music-toggle');
const slider = document.getElementById('music-volume');

// ðŸ”¹ Cargar volumen guardado o usar valor inicial
const savedVolume = localStorage.getItem('musicVolume');
const initialVolume = savedVolume !== null ? parseFloat(savedVolume) : parseFloat(slider.value);
music.volume = initialVolume;
slider.value = initialVolume;
let lastVolume = initialVolume || 0.4;

// ðŸ”¹ Actualizar Ã­cono segÃºn volumen
function updateIcon() {
  if (music.volume === 0) {
    toggle.src = '../src/img/sound_off.png';
  } else {
    toggle.src = '../src/img/sound_on.png';
  }
}

// ðŸ”¹ Guardar el volumen cada vez que se cambia
slider.addEventListener('input', () => {
  music.volume = parseFloat(slider.value);
  if (music.volume === 0) {
    toggle.src = '../src/img/sound_off.png';
  } else {
    toggle.src = '../src/img/sound_on.png';
    lastVolume = music.volume;
  }
  localStorage.setItem('musicVolume', music.volume);
});

// ðŸ”¹ BotÃ³n mute / unmute
toggle.addEventListener('click', () => {
  if (music.volume > 0) {
    lastVolume = music.volume;
    music.volume = 0;
    slider.value = 0;
  } else {
    music.volume = lastVolume || 0.4;
    slider.value = music.volume;
  }
  updateIcon();
  localStorage.setItem('musicVolume', music.volume);
});

// ðŸ”¹ Ajustar icono al cargar
window.addEventListener('DOMContentLoaded', updateIcon);

// ðŸ”¹ Autoplay (requiere interacciÃ³n)
document.addEventListener('click', () => {
  if (music.paused) music.play().catch(() => {});
}, { once: true });

// ðŸ”¹ Luz reactiva
const light = document.getElementById("music-light");
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const source = audioCtx.createMediaElementSource(music);
const analyser = audioCtx.createAnalyser();
analyser.fftSize = 256;
const dataArray = new Uint8Array(analyser.frequencyBinCount);
source.connect(analyser);
analyser.connect(audioCtx.destination);

function animateLight() {
  analyser.getByteFrequencyData(dataArray);
  const avg = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;
  const intensity = avg / 255;
  const scale = 1 + intensity * 1.2;
  const opacity = 0.15 + intensity * 0.85;
  light.style.transform = `translateX(-50%) scale(${scale})`;
  light.style.opacity = opacity;
  requestAnimationFrame(animateLight);
}

document.addEventListener('click', async () => {
  if (audioCtx.state === 'suspended') await audioCtx.resume();
  if (music.paused) await music.play().catch(() => {});
  animateLight();
}, { once: true });

window.addEventListener('load', () => {
  if (!music.paused) animateLight();
});

</script>
</body>
</html>
